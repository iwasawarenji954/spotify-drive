# 開発中に守ること
最小単位でデプロイする

## 概要 (Overview)

みんなで匿名で曲を出し合って、一つのプレイリストを育てていくWebアプリケーションです。誰がどの曲を入れたかわからないドキドキ感と、再生された曲へのリアルタイムのリアクションを楽しめます。パーティーやイベントでの利用に最適です。

**このアプリが提供する体験:**

- 自分の好きな曲を、周りの目を気にせずプレイリストに追加できる。

- みんながどんな曲に「いいね！」するのか、リアルタイムで盛り上がりを共有できる。

- パーティーの最後に、人気曲ランキングと自分の選曲センスの結果発表で二度楽しめる。


**最終的なゴール:**

- Spotifyアカウントさえあれば、誰でも手軽に「匿名DJパーティー」を主催・参加できる。


## ページ構成 (Page Structure)

ユーザーがアプリをどのように使うかに沿って、必要なページを考えます。**モバイルファースト**でデザインします。

1. **トップページ (`/`)**

    - **役割**: アプリの紹介とログイン。

    - **機能**: "Spotifyでログイン"ボタン。

    - **レイアウト**:

        - **📱 スマホ**: アプリのロゴとログインボタンを画面中央に大きく配置。

        - **💻 PC**: 基本的なレイアウトは同じ。背景に音楽やパーティーをイメージさせるビジュアルを追加しても良い。

2. **ダッシュボードページ (`/dashboard`)**

    - **役割**: ログイン後のホーム画面。パーティーの作成または参加を選択する。

    - **機能**:

        - "新しいパーティーを作成する"ボタン (`/party/create`へ遷移)。

        - "参加コードでパーティーに参加する"入力欄とボタン (`/party/[partyId]`へ遷移)。

    - **レイアウト**:

        - **📱 スマホ**: 「作成」「参加」の選択肢を縦に並べたシンプルなリスト形式。

        - **💻 PC**: カード形式で「作成」「参加」を横に並べて表示。

3. **パーティールームページ (`/party/[partyId]`)**

    - **役割**: アプリのメイン画面。ホストと参加者で表示が少し変わる。

    - **共通の機能**:

        - 現在再生中の楽曲情報表示。

        - "いいね！"ボタン。

    - **参加者の機能**:

        - 楽曲検索フォーム。

        - プレイリストへの楽曲追加ボタン。

    - **ホストの機能**:

        - 参加者共有用のURL/コード表示。

        - "パーティーを終了する"ボタン (`/party/[partyId]/results`へ遷移)。

    - **レイアウト**:

        - **📱 スマホ**:

            - 画面上部に再生中の楽曲情報（ジャケット写真、曲名）を固定表示。

            - その下に大きな「いいね！」ボタンを配置。

            - 画面下部に楽曲検索・追加用のボタンを配置し、タップするとモーダルウィンドウや別エリアで検索機能が開くようにする。

        - **💻 PC**:

            - 左側に大きく再生中の楽曲情報を表示。

            - 右側に参加者が追加した曲のキュー（順番待ちリスト）や、楽曲検索エリアを配置する3カラムレイアウト。

4. **結果発表ページ (`/party/[partyId]/results`)**

    - **役割**: パーティー終了後のランキング画面。

    - **機能**:

        - いいね数ランキングの表示。

        - 自分が追加した曲の合計いいね数（個人スコア）の表示。

    - **レイアウト**:

        - **📱 スマホ**: ランキングを縦に並べたリスト形式で表示。最初に自分のスコアをハイライト表示する。

        - **💻 PC**: ランキングをテーブル（表）形式で見やすく表示。ジャケット写真なども含めてリッチに見せる。


## デザインルール (Design Rules)

[Spotify公式のデザインガイドライン](https://developer.spotify.com/documentation/design "null")に準拠し、ユーザーが直感的に使えるUIを目指します。

- **カラーパレット**: Spotifyのブランドカラーである黒 (`#191414`)、白 (`#FFFFFF`)、緑 (`#1DB954`) を基本とします。

- **タイポグラフィ**: Spotifyが使用しているフォント（Circular）の雰囲気を意識し、可読性の高いサンセリフ体のフォント（Inter, Proxima Nova, Helveticaなど）を使用します。

- **コンポーネント**: ボタンやカード、入力フォームなどのUI要素は、Spotifyアプリのスタイルを参考に、シンプルでクリーンなデザインにします。

- **ロゴの使用**: Spotifyのロゴやアイコンを使用する場合は、ガイドラインで定められたルール（余白、色、サイズなど）を遵守します。

- **全体的な雰囲気**: コンテンツ（音楽）が主役になるよう、過度な装飾は避け、機能的で美しいレイアウトを心がけます。


## 使い方 (Usage)
### セットアップ

1. **Spotify for Developersでアプリを登録**

    1. [Spotify Developer Dashboard](https://developer.spotify.com/dashboard "null")にアクセスします。

    2. アプリを新規作成し、`Client ID`と`Client Secret`を取得します。

    3. アプリの設定で、Redirect URIに `http://127.0.0.1:3000/api/auth/callback/spotify` を追加します。


## 開発ルール (Development Rules)

- **ブランチ名**: `feat/機能名`, `fix/修正内容`

- **コミットメッセージ**: `feat: ログイン機能を追加` のように記述します。

- **技術スタック（予定）**:

    - フロントエンド: React / Next.js

    - スタイル: Tailwind CSS

    - 認証: NextAuth.js (Spotifyプロバイダーを利用)

    - データベース: Supabase - 匿名いいねやスコアの集計に使用, Prisma


## 機能一覧 (Features)

### v1.0 - パーティーの準備機能

- [ ] **ユーザー認証**: Spotifyアカウントでログインできる。

- [ ] **ホスト機能**:

    - [ ] ホストは「パーティールーム」を作成できる。

    - [ ] 自分のSpotifyプレイリストから、空のプレイリストをパーティー用に選択できる。

    - [ ] 参加者用の共有URLまたは参加コードが発行される。


### v2.0 - 参加者と選曲機能

- [ ] **参加者機能**: 共有URLからパーティールームに参加できる。

- [ ] **楽曲追加機能**:

    - [ ] 参加者はアプリ内でSpotifyの楽曲を検索できる。

    - [ ] 検索した曲を、ホストのプレイリストに**匿名で**追加できる。


### v3.0 - リアルタイム再生・リアクション機能

- [ ] **再生情報表示**: ホストがプレイリストを再生中、参加者の画面に現在再生中の楽曲情報（曲名、アーティスト名、ジャケット写真）が表示される。

- [ ] **いいね機能**: 再生中の曲に対して「いいね！」ボタンを押せる。


### v4.0 - 結果発表・ゲーミフィケーション機能

- [ ] **パーティー終了**: ホストがパーティーを終了できる。

- [ ] **ランキング表示**: パーティー終了後、いいねが多かった曲のランキングが全参加者に表示される。

- [ ] **個人スコア表示**: 各参加者の画面に、自分が追加した曲が獲得した合計いいね数が表示される。
